## Вопросы: 
 
1. какие базовые цепочки и таблицы существуют в iptables и для чего служат?
 - Цепочки:
   - PREROUTING — пакеты ДО маршрутизации
   - INPUT — пакеты, предназначенные текущему хосту
   - FORWARD — транзитные пакеты
   - OUTPUT — пакеты от текущего хоста
   - POSTROUTING — все исходящие пакеты 
 - Таблицы:
   - MANGLE — классификация и маркировка пакетов и соединений, модификация заголовков
   - NAT — преобразование сетевых адресов и портов
   - FILTER — фильтрация трафика
   - SECURITY — изменение маркировок безопасности
   - RAW — действия с пакетами до обработки conntrack
   - RAWPOST — подмена исходного трафика без использования информации о соединении
2. опишите процесс обработки пакета который предназначен данной системе
 - PREROUTING -> INPUT -> Локальный процесс, которому назначался пакет -> OUTPUT -> POSTROUTING
3. что такое conntrack и для чего используется?
 - conntrack отслеживает все логические сетевые соединения, чтобы идентифицировать пакеты из одного потока для дальнейшего использования их вместе
4. какими командами создать/удалить цепочку? создать/удалить правило? создать правило до определенного правила в цепочке?
 - Создать цепочку: iptables -N NEWCHAIN
 - Удалить цепочку: iptables -X NEWCHAIN
 - Создать правило: iptables -A NEWCHAIN [arguments]
 -  До конкретного: iptables -I NEWCHAIN [N] [arguments]
 - Удалить правило: iptables -D NEWCHAIN
 
## Лабораторная работа:
### взять за основу конфигурационный файл iptables, поднять в системе ssh сервер. 
```bash
 $ iptables-restore chelgu_iptables
 $ systemctl start ssh
```
1. настроить правила которые разрешают доступ на этот сервер с определенной подсети или хоста в которой находитесь вы как клиент, продемонстрировать что работает icmp
```bash
 $ iptables -I INPUT -s 192.168.174.1 -j ACCEPT
```
![linux console](1.png "Console")

2. затем закрыть доступ из этой подсети по icmp, осавив доступ по ssh, продемонстрировать что хост по ssh доступен а icmp нет
```bash
 $ iptables -I INPUT -s 192.168.174.1 -j DROP
 $ iptables -I INPUT -s 192.168.174.1 -p tcp --dport 22 -j ACCEPT
```
![linux console](2.png "Console")

3. Запретить только ssh , продемонстрировать что icmp работает
```bash
 $ iptables -I INPUT -s 192.168.174.1 -p tcp --dport 22 -j DROP
```
![linux console](3.png "Console")
